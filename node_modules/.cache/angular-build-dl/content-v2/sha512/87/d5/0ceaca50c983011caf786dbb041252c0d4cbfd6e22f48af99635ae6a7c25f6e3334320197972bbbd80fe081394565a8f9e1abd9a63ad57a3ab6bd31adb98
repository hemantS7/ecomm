(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{"8BR2":function(c,e,t){"use strict";t.r(e),t.d(e,"routes",(function(){return G})),t.d(e,"CouponsModule",(function(){return R}));var o=t("ofXK"),i=t("tyNb"),r=t("3Pt+"),n=t("PCNd"),a=t("oOf3"),d=t("F5nt");const s=[{id:1,title:"10% Off",code:"#2491",desc:"lorem ipsum",discountType:1,amount:10,expiryDate:new Date(2020,11,15),allowFreeShipping:!1,storeId:1,showOnStore:!1,restriction:{minimumSpend:10,maximumSpend:30,individualUseOnly:!0,excludeSaleItems:!1,products:["Keyboard","Headset"],categories:[30,31,32]},limit:{perCoupon:1,perItems:1,perUser:1}},{id:2,title:"20% Off",code:"#3274",desc:"lorem ipsum",discountType:2,amount:20,expiryDate:new Date(2020,8,5),allowFreeShipping:!1,storeId:2,showOnStore:!1,restriction:{minimumSpend:20,maximumSpend:50,individualUseOnly:!0,excludeSaleItems:!1,products:[],categories:[]},limit:{perCoupon:3,perItems:1,perUser:1}},{id:3,title:"10% Off",code:"#5247",desc:"lorem ipsum",discountType:3,amount:10,expiryDate:new Date(2021,11,25),allowFreeShipping:!1,storeId:1,showOnStore:!1,restriction:{minimumSpend:10,maximumSpend:50,individualUseOnly:!0,excludeSaleItems:!1,products:[],categories:[]},limit:{perCoupon:1,perItems:1,perUser:1}},{id:4,title:"10% Off",code:"#9585",desc:"lorem ipsum",discountType:2,amount:10,expiryDate:new Date(2020,4,22),allowFreeShipping:!1,storeId:1,showOnStore:!1,restriction:{minimumSpend:10,maximumSpend:30,individualUseOnly:!0,excludeSaleItems:!1,products:[],categories:[]},limit:{perCoupon:2,perItems:1,perUser:1}},{id:5,title:"5% Off",code:"#3258",desc:"lorem ipsum",discountType:2,amount:30,expiryDate:new Date(2020,5,12),allowFreeShipping:!1,storeId:2,showOnStore:!1,restriction:{minimumSpend:5,maximumSpend:30,individualUseOnly:!0,excludeSaleItems:!1,products:[],categories:[]},limit:{perCoupon:4,perItems:1,perUser:1}},{id:6,title:"25% Off",code:"#7425",desc:"lorem ipsum",discountType:3,amount:25,expiryDate:new Date(2020,3,29),allowFreeShipping:!1,storeId:1,showOnStore:!1,restriction:{minimumSpend:25,maximumSpend:30,individualUseOnly:!0,excludeSaleItems:!1,products:[],categories:[]},limit:{perCoupon:2,perItems:1,perUser:1}},{id:7,title:"15% Off",code:"#5688",desc:"lorem ipsum",discountType:1,amount:20,expiryDate:new Date(2020,12,24),allowFreeShipping:!1,storeId:2,showOnStore:!1,restriction:{minimumSpend:15,maximumSpend:30,individualUseOnly:!0,excludeSaleItems:!1,products:[],categories:[]},limit:{perCoupon:6,perItems:1,perUser:1}},{id:8,title:"10% Off",code:"#5962",desc:"lorem ipsum",discountType:1,amount:30,expiryDate:new Date(2020,8,12),allowFreeShipping:!1,storeId:2,showOnStore:!1,restriction:{minimumSpend:10,maximumSpend:30,individualUseOnly:!0,excludeSaleItems:!1,products:[],categories:[]},limit:{perCoupon:3,perItems:1,perUser:1}}];var m=t("0IaG"),l=t("FtGj"),p=t("fXoL"),u=t("wZkO"),f=t("XiUz"),h=t("kmnG"),b=t("qFsG"),v=t("d3UM"),g=t("FKr1"),O=t("iadO"),y=t("bSwM"),x=t("NFeN"),C=t("Qu3c"),S=t("A5z7"),w=t("bTqV");function I(c,e){1&c&&(p.dc(0,"mat-error"),p.Oc(1,"Title is required"),p.cc())}function F(c,e){1&c&&(p.dc(0,"mat-error"),p.Oc(1,"Code is required"),p.cc())}function D(c,e){if(1&c&&(p.dc(0,"mat-option",12),p.dc(1,"span"),p.Oc(2),p.cc(),p.cc()),2&c){const c=e.$implicit;p.vc("value",c.id),p.Kb(2),p.Pc(c.name)}}function T(c,e){if(1&c&&(p.dc(0,"mat-option",12),p.dc(1,"span"),p.Oc(2),p.cc(),p.cc()),2&c){const c=e.$implicit;p.vc("value",c.id),p.Kb(2),p.Pc(c.name)}}function K(c,e){1&c&&(p.dc(0,"mat-error"),p.Oc(1,"Minimum Spend is required"),p.cc())}function k(c,e){if(1&c){const c=p.ec();p.dc(0,"mat-chip",49),p.lc("removed",(function(){p.Fc(c);const t=e.$implicit;return p.pc().removeProduct(t)})),p.Oc(1),p.dc(2,"mat-icon",50),p.Oc(3,"cancel"),p.cc(),p.cc()}if(2&c){const c=e.$implicit;p.vc("selectable",!0)("removable",!0),p.Kb(1),p.Qc(" ",c," ")}}function P(c,e){if(1&c&&(p.dc(0,"mat-option",12),p.dc(1,"span"),p.Oc(2),p.cc(),p.cc()),2&c){const c=e.$implicit;p.vc("value",c.id),p.Kb(2),p.Pc(c.name)}}let U=(()=>{class c{constructor(c,e,t){this.dialogRef=c,this.data=e,this.fb=t,this.separatorKeysCodes=[l.g,l.c],this.products=[]}ngOnInit(){this.form=this.fb.group({id:0,title:["",r.t.required],code:["",r.t.required],desc:null,discountType:null,amount:null,expiryDate:null,allowFreeShipping:!1,storeId:null,showOnStore:!1,restriction:this.fb.group({minimumSpend:null,maximumSpend:null,individualUseOnly:!1,excludeSaleItems:!1,products:[[]],categories:[[]]}),limit:this.fb.group({perCoupon:null,perItems:null,perUser:null})}),this.data.coupon&&(this.form.patchValue(this.data.coupon),this.products=this.data.coupon.restriction.products)}onSubmit(){console.log(this.form.value),this.form.valid&&this.dialogRef.close(this.form.value)}addProduct(c){const e=c.input,t=c.value;(t||"").trim()&&this.products.push(t.trim()),e&&(e.value=""),this.form.controls.restriction.controls.products.patchValue(this.products)}removeProduct(c){const e=this.products.indexOf(c);e>=0&&this.products.splice(e,1),this.form.controls.restriction.controls.products.patchValue(this.products)}}return c.\u0275fac=function(e){return new(e||c)(p.Xb(m.g),p.Xb(m.a),p.Xb(r.d))},c.\u0275cmp=p.Rb({type:c,selectors:[["app-coupon-dialog"]],decls:133,vars:13,consts:[["mat-dialog-title",""],["autocomplete","off",1,"user-form",3,"formGroup","ngSubmit"],["mat-dialog-content",""],[1,"tab-content-wrapped"],["label","General Info"],["fxLayout","row wrap",1,"mt-2"],["fxFlex","100","fxFlex.gt-md","25",1,"px-1"],["appearance","outline",1,"w-100"],["matInput","","formControlName","title","required",""],[4,"ngIf"],["matInput","","formControlName","code","required",""],["formControlName","discountType"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],["matInput","","formControlName","amount"],["matInput","","formControlName","expiryDate",3,"matDatepicker"],["matSuffix","",3,"for"],["expiryDate",""],["formControlName","storeId"],[1,"py-1"],["formControlName","allowFreeShipping","color","primary"],["fxLayout","row","fxLayoutAlign","start center"],[1,"mr-1"],["color","primary","matTooltip","Check this box if the coupon grants free shipping. The free shipping method must be enabled and be set to require.",1,"mat-icon-sm"],["formControlName","showOnStore","color","primary"],["color","primary","matTooltip","Check this box if you want to show this coupon in store page.",1,"mat-icon-sm"],["fxFlex","100",1,"px-1"],["matInput","","formControlName","desc"],["label","Restriction","formGroupName","restriction"],["fxFlex","100","fxFlex.gt-md","50",1,"px-1"],["matInput","","formControlName","minimumSpend","required",""],["matInput","","formControlName","maximumSpend"],["productsChipList",""],[3,"selectable","removable","removed",4,"ngFor","ngForOf"],["placeholder","Add products...",3,"matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputAddOnBlur","matChipInputTokenEnd"],["formControlName","categories","multiple",""],["formControlName","individualUseOnly","color","primary"],["color","primary","matTooltip","Check this box if the coupon cannot be used in conjunction with other coupons.",1,"mat-icon-sm"],["formControlName","excludeSaleItems","color","primary"],["color","primary","matTooltip","Check this box if the coupon should not apply to items on sale. Per-item coupons will only work if the item is not on sale. Per-cart coupons will only work if there are no sale items in the cart.",1,"mat-icon-sm"],["label","Limit","formGroupName","limit"],["fxFlex","100","fxFlex.gt-md","33.3",1,"px-1"],["matInput","","formControlName","perCoupon","type","number"],["matInput","","formControlName","perItems","type","number"],["matInput","","formControlName","perUser","type","number"],["mat-dialog-actions",""],["fxLayout","row","fxLayoutAlign","space-between center",1,"w-100"],["mat-raised-button","","color","warn","type","button","mat-dialog-close",""],["mat-raised-button","","color","primary","type","submit"],[3,"selectable","removable","removed"],["matChipRemove",""]],template:function(c,e){if(1&c&&(p.dc(0,"h1",0),p.Oc(1,"Coupon"),p.cc(),p.dc(2,"form",1),p.lc("ngSubmit",(function(){return e.onSubmit()})),p.dc(3,"div",2),p.dc(4,"mat-tab-group",3),p.dc(5,"mat-tab",4),p.dc(6,"div",5),p.dc(7,"div",6),p.dc(8,"mat-form-field",7),p.dc(9,"mat-label"),p.Oc(10,"Title"),p.cc(),p.Yb(11,"input",8),p.Mc(12,I,2,0,"mat-error",9),p.cc(),p.cc(),p.dc(13,"div",6),p.dc(14,"mat-form-field",7),p.dc(15,"mat-label"),p.Oc(16,"Code"),p.cc(),p.Yb(17,"input",10),p.Mc(18,F,2,0,"mat-error",9),p.cc(),p.cc(),p.dc(19,"div",6),p.dc(20,"mat-form-field",7),p.dc(21,"mat-label"),p.Oc(22,"Discount Type"),p.cc(),p.dc(23,"mat-select",11),p.dc(24,"mat-option",12),p.Oc(25,"-"),p.cc(),p.Mc(26,D,3,2,"mat-option",13),p.cc(),p.cc(),p.cc(),p.dc(27,"div",6),p.dc(28,"mat-form-field",7),p.dc(29,"mat-label"),p.Oc(30,"Amount"),p.cc(),p.Yb(31,"input",14),p.cc(),p.cc(),p.dc(32,"div",6),p.dc(33,"mat-form-field",7),p.dc(34,"mat-label"),p.Oc(35,"Coupon expiry date"),p.cc(),p.Yb(36,"input",15),p.Yb(37,"mat-datepicker-toggle",16),p.Yb(38,"mat-datepicker",null,17),p.cc(),p.cc(),p.dc(40,"div",6),p.dc(41,"mat-form-field",7),p.dc(42,"mat-label"),p.Oc(43,"Store"),p.cc(),p.dc(44,"mat-select",18),p.dc(45,"mat-option",12),p.Oc(46,"-"),p.cc(),p.Mc(47,T,3,2,"mat-option",13),p.cc(),p.cc(),p.cc(),p.dc(48,"div",6),p.dc(49,"div",19),p.dc(50,"mat-checkbox",20),p.dc(51,"div",21),p.dc(52,"span",22),p.Oc(53,"Allow free shipping"),p.cc(),p.dc(54,"mat-icon",23),p.Oc(55,"live_help"),p.cc(),p.cc(),p.cc(),p.cc(),p.cc(),p.dc(56,"div",6),p.dc(57,"div",19),p.dc(58,"mat-checkbox",24),p.dc(59,"div",21),p.dc(60,"span",22),p.Oc(61,"Show on store"),p.cc(),p.dc(62,"mat-icon",25),p.Oc(63,"live_help"),p.cc(),p.cc(),p.cc(),p.cc(),p.cc(),p.dc(64,"div",26),p.dc(65,"mat-form-field",7),p.dc(66,"mat-label"),p.Oc(67,"Description"),p.cc(),p.Yb(68,"input",27),p.cc(),p.cc(),p.cc(),p.cc(),p.dc(69,"mat-tab",28),p.dc(70,"div",5),p.dc(71,"div",29),p.dc(72,"mat-form-field",7),p.dc(73,"mat-label"),p.Oc(74,"Minimum Spend"),p.cc(),p.Yb(75,"input",30),p.Mc(76,K,2,0,"mat-error",9),p.cc(),p.cc(),p.dc(77,"div",29),p.dc(78,"mat-form-field",7),p.dc(79,"mat-label"),p.Oc(80,"Maximum Spend"),p.cc(),p.Yb(81,"input",31),p.cc(),p.cc(),p.dc(82,"div",26),p.dc(83,"mat-form-field",7),p.dc(84,"mat-chip-list",null,32),p.Mc(86,k,4,3,"mat-chip",33),p.dc(87,"input",34),p.lc("matChipInputTokenEnd",(function(c){return e.addProduct(c)})),p.cc(),p.cc(),p.cc(),p.cc(),p.dc(88,"div",29),p.dc(89,"mat-form-field",7),p.dc(90,"mat-label"),p.Oc(91,"Product categories"),p.cc(),p.dc(92,"mat-select",35),p.Mc(93,P,3,2,"mat-option",13),p.cc(),p.cc(),p.cc(),p.dc(94,"div",6),p.dc(95,"div",19),p.dc(96,"mat-checkbox",36),p.dc(97,"div",21),p.dc(98,"span",22),p.Oc(99,"Individual use only"),p.cc(),p.dc(100,"mat-icon",37),p.Oc(101,"live_help"),p.cc(),p.cc(),p.cc(),p.cc(),p.cc(),p.dc(102,"div",6),p.dc(103,"div",19),p.dc(104,"mat-checkbox",38),p.dc(105,"div",21),p.dc(106,"span",22),p.Oc(107,"Exclude sale items"),p.cc(),p.dc(108,"mat-icon",39),p.Oc(109,"live_help"),p.cc(),p.cc(),p.cc(),p.cc(),p.cc(),p.cc(),p.cc(),p.dc(110,"mat-tab",40),p.dc(111,"div",5),p.dc(112,"div",41),p.dc(113,"mat-form-field",7),p.dc(114,"mat-label"),p.Oc(115,"Usage limit per coupon"),p.cc(),p.Yb(116,"input",42),p.cc(),p.cc(),p.dc(117,"div",41),p.dc(118,"mat-form-field",7),p.dc(119,"mat-label"),p.Oc(120,"Limit usage to X items"),p.cc(),p.Yb(121,"input",43),p.cc(),p.cc(),p.dc(122,"div",41),p.dc(123,"mat-form-field",7),p.dc(124,"mat-label"),p.Oc(125,"Usage limit per user"),p.cc(),p.Yb(126,"input",44),p.cc(),p.cc(),p.cc(),p.cc(),p.cc(),p.cc(),p.dc(127,"div",45),p.dc(128,"div",46),p.dc(129,"button",47),p.Oc(130,"Close"),p.cc(),p.dc(131,"button",48),p.Oc(132,"Save"),p.cc(),p.cc(),p.cc(),p.cc()),2&c){const c=p.Cc(39),t=p.Cc(85);p.Kb(2),p.vc("formGroup",e.form),p.Kb(10),p.vc("ngIf",null==e.form.controls.title.errors?null:e.form.controls.title.errors.required),p.Kb(6),p.vc("ngIf",null==e.form.controls.code.errors?null:e.form.controls.code.errors.required),p.Kb(8),p.vc("ngForOf",e.data.discountTypes),p.Kb(10),p.vc("matDatepicker",c),p.Kb(1),p.vc("for",c),p.Kb(10),p.vc("ngForOf",e.data.stores),p.Kb(29),p.vc("ngIf",null==e.form.get("restriction").controls.minimumSpend.errors?null:e.form.get("restriction").controls.minimumSpend.errors.required),p.Kb(10),p.vc("ngForOf",e.products),p.Kb(1),p.vc("matChipInputFor",t)("matChipInputSeparatorKeyCodes",e.separatorKeysCodes)("matChipInputAddOnBlur",!0),p.Kb(6),p.vc("ngForOf",e.data.categories)}},directives:[m.h,r.u,r.n,r.f,m.e,u.b,u.a,f.c,f.a,h.c,h.f,b.b,r.c,r.m,r.e,r.s,o.m,v.a,g.n,o.l,O.b,O.d,h.i,O.a,y.a,f.b,x.a,C.a,r.g,S.c,S.b,r.q,m.c,w.b,m.d,h.b,S.a,S.d],styles:[""]}),c})();var N=t("ZokB"),M=t("/RaO"),q=t("Wp6s"),L=t("f0Cb"),Y=t("vBMV");function A(c,e){if(1&c){const c=p.ec();p.dc(0,"div",9),p.dc(1,"div",10),p.Oc(2),p.cc(),p.dc(3,"div",10),p.Oc(4," Discount "),p.dc(5,"span",11),p.Oc(6),p.cc(),p.cc(),p.dc(7,"div",10),p.Oc(8),p.qc(9,"filterById"),p.cc(),p.dc(10,"div",10),p.Oc(11),p.cc(),p.dc(12,"div",10),p.Oc(13),p.qc(14,"filterById"),p.cc(),p.dc(15,"div",10),p.Oc(16),p.cc(),p.dc(17,"div",10),p.Oc(18),p.qc(19,"date"),p.cc(),p.dc(20,"div",10),p.dc(21,"div",12),p.dc(22,"button",13),p.lc("click",(function(){p.Fc(c);const t=e.$implicit;return p.pc().openCouponDialog(t)})),p.dc(23,"mat-icon"),p.Oc(24,"edit"),p.cc(),p.cc(),p.dc(25,"button",14),p.lc("click",(function(){p.Fc(c);const t=e.$implicit;return p.pc().remove(t)})),p.dc(26,"mat-icon"),p.Oc(27,"delete"),p.cc(),p.cc(),p.cc(),p.cc(),p.cc()}if(2&c){const c=e.$implicit,i=p.pc();var t,o;p.Kb(2),p.Pc(c.title),p.Kb(4),p.Pc(c.code),p.Kb(2),p.Pc(null==(t=p.sc(9,7,i.discountTypes,c.discountType))?null:t.name),p.Kb(3),p.Pc(c.amount),p.Kb(2),p.Pc(null==(o=p.sc(14,10,i.stores,c.storeId))?null:o.name),p.Kb(3),p.Pc(c.limit.perCoupon),p.Kb(2),p.Pc(p.sc(19,13,c.expiryDate,"dd MMMM, yyyy"))}}function X(c,e){if(1&c){const c=p.ec();p.dc(0,"div",15),p.dc(1,"div",16),p.dc(2,"mat-card",17),p.dc(3,"pagination-controls",18),p.lc("pageChange",(function(e){return p.Fc(c),p.pc().onPageChanged(e)})),p.cc(),p.cc(),p.cc(),p.cc()}}const B=function(c,e){return{itemsPerPage:c,currentPage:e}},G=[{path:"",component:(()=>{class c{constructor(c,e,t){this.appService=c,this.dialog=e,this.appSettings=t,this.coupons=[],this.stores=[{id:1,name:"Store 1"},{id:2,name:"Store 2"}],this.discountTypes=[{id:1,name:"Percentage discount"},{id:2,name:"Fixed Cart Discount"},{id:3,name:"Fixed Product Discount"}],this.count=6,this.settings=this.appSettings.settings}ngOnInit(){this.coupons=s,this.getCategories()}getCategories(){this.appService.getCategories().subscribe(c=>{this.categories=c,this.categories.shift()})}onPageChanged(c){this.page=c,window.scrollTo(0,0)}openCouponDialog(c){this.dialog.open(U,{data:{coupon:c,stores:this.stores,categories:this.categories,discountTypes:this.discountTypes},panelClass:["theme-dialog"],autoFocus:!1,direction:this.settings.rtl?"rtl":"ltr"}).afterClosed().subscribe(c=>{if(c){const e=this.coupons.findIndex(e=>e.id==c.id);-1!==e?this.coupons[e]=c:(c.id=this.coupons[this.coupons.length-1].id+1,this.coupons.push(c))}})}remove(c){this.dialog.open(N.a,{maxWidth:"400px",data:{title:"Confirm Action",message:"Are you sure you want remove this coupon?"}}).afterClosed().subscribe(e=>{if(e){const e=this.coupons.indexOf(c);-1!==e&&this.coupons.splice(e,1)}})}}return c.\u0275fac=function(e){return new(e||c)(p.Xb(d.a),p.Xb(m.b),p.Xb(M.a))},c.\u0275cmp=p.Rb({type:c,selectors:[["app-coupons"]],decls:28,vars:8,consts:[[1,"p-1"],[1,"p-0"],["fxLayout","row wrap","fxLayoutAlign","space-between center",1,"w-100","p-2"],["mat-raised-button","","color","primary",3,"click"],[1,"mat-table","admin-table"],[1,"mat-header-row"],[1,"mat-header-cell"],["class","mat-row",4,"ngFor","ngForOf"],["fxLayout","row wrap",4,"ngIf"],[1,"mat-row"],[1,"mat-cell"],[1,"primary-text"],[1,"p-1","actions"],["mat-mini-fab","","color","primary","matTooltip","Edit",3,"click"],["mat-mini-fab","","color","warn","matTooltip","Delete",1,"mx-1",3,"click"],["fxLayout","row wrap"],["fxFlex","100"],[1,"p-0","text-center"],["autoHide","true","maxSize","5",1,"product-pagination",3,"pageChange"]],template:function(c,e){1&c&&(p.dc(0,"div",0),p.dc(1,"mat-card",1),p.dc(2,"div",2),p.dc(3,"h2"),p.Oc(4,"Coupons List"),p.cc(),p.dc(5,"button",3),p.lc("click",(function(){return e.openCouponDialog(null)})),p.Oc(6,"Add Coupon"),p.cc(),p.cc(),p.Yb(7,"mat-divider"),p.dc(8,"div",4),p.dc(9,"div",5),p.dc(10,"div",6),p.Oc(11,"Title"),p.cc(),p.dc(12,"div",6),p.Oc(13,"Code"),p.cc(),p.dc(14,"div",6),p.Oc(15,"Discount Type"),p.cc(),p.dc(16,"div",6),p.Oc(17,"Amount"),p.cc(),p.dc(18,"div",6),p.Oc(19,"Store"),p.cc(),p.dc(20,"div",6),p.Oc(21,"Usage Limit"),p.cc(),p.dc(22,"div",6),p.Oc(23,"Expiry Date"),p.cc(),p.Yb(24,"div",6),p.cc(),p.Mc(25,A,28,16,"div",7),p.qc(26,"paginate"),p.cc(),p.cc(),p.Mc(27,X,4,0,"div",8),p.cc()),2&c&&(p.Kb(25),p.vc("ngForOf",p.sc(26,2,e.coupons,p.zc(5,B,e.count,e.page))),p.Kb(2),p.vc("ngIf",e.coupons.length>0))},directives:[q.a,f.c,f.b,w.b,L.a,o.l,o.m,C.a,x.a,f.a,a.c],pipes:[a.b,Y.a,o.e],styles:[""]}),c})(),pathMatch:"full"}];let R=(()=>{class c{}return c.\u0275mod=p.Vb({type:c}),c.\u0275inj=p.Ub({factory:function(e){return new(e||c)},imports:[[o.c,i.g.forChild(G),r.r,n.a,a.a]]}),c})()},vBMV:function(c,e,t){"use strict";t.d(e,"a",(function(){return i}));var o=t("fXoL");let i=(()=>{class c{transform(c,e){return c.filter(c=>c.id==e)[0]}}return c.\u0275fac=function(e){return new(e||c)},c.\u0275pipe=o.Wb({name:"filterById",type:c,pure:!0}),c})()}}]);